<script lang="ts">
    import { onMount } from 'svelte';
    import './style.css';

    let test = true;
    let settings = $state(false);
    let temp = 23;
    let hum = 30;
    let lumens = 0;
    let menuIndex = $state(0);
    let editingIndex = $state(-1);
    let watering = $state<'Auto' | 'Manual'>('Auto');
    let wateringTime = $state(10);

    let CPXA = $state({
        "Light0": {
            "color": "#383838"
        },
        "Light1": {
            "color": "#383838"
        },
        "Light2": {
            "color": "#383838"
        },
        "Light3": {
            "color": "#383838"
        },
        "Light4": {
            "color": "#383838"
        },
        "Light5": {
            "color": "#383838"
        },
        "Light6": {
            "color": "#383838"
        },
        "Light7": {
            "color": "#383838"
        },
        "Light8": {
            "color": "#383838"
        },
        "Light9": {
            "color": "#383838"
        }
    });

    let CPXbtn = $state({
        "Button1": {
            "color": "#FFFFFF"
        },
        "Button2": {
            "color": "#FFFFFF"
        },
        "Button3": {
            "color": "#FFFFFF"
        }
    })

    let displayText = $state({
        "Line1": {
            "text": "..."
        },
        "Line2": {
            "text": "..."
        },
        "Line3": {
            "text": "..."
        },
        "Line4": {
            "text": "..."
        }
    });
    
    function setStatusScreen() {
        displayText.Line1.text = `Temp: ${temp}C*`;
        displayText.Line2.text = `Hum: ${hum}%`;
        displayText.Line3.text = `Lumens: ${lumens}`;
        displayText.Line4.text = `...`;
    }

    function setSettingsScreen() {
        const items = buildSettingsLines();
        displayText.Line1.text = items[0] + (menuIndex === 0 ? ' <' : '');
        displayText.Line2.text = items[1] + (menuIndex === 1 ? ' <' : '');
        displayText.Line3.text = items[2] + (menuIndex === 2 ? ' <' : '');
        displayText.Line4.text = items[3] + (menuIndex === 3 ? ' <' : '');
    }

    function normalizeMenuAfterChange() {
        const items = buildSettingsLines();
        const lastIdx = items.length - 1;
        if (menuIndex > lastIdx) menuIndex = lastIdx;
        if (watering === 'Auto' && editingIndex === 1) editingIndex = -1;
    }

    function openSettings() {
        settings = true;
        menuIndex = 0;
        editingIndex = -1;
        setSettingsScreen();
    }

    function closeSettings() {
        settings = false;
        editingIndex = -1;
        setStatusScreen();
    }

    function pause(ms: number) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    function buildSettingsLines(): string[] {
        const items: string[] = [];
        items.push(`Watering: ${watering}`);
        if (watering === 'Manual') items.push(`Time: ${wateringTime} min`);
        while (items.length < 3) items.push(`...`);
        items.push(`Back`);
        return items;
    }

    setInterval(() => {
        if (test) {
            CPXA.Light0.color = "#00FFFF";
            test = false;
        } else {
            CPXA.Light0.color = "#383838";
            test = true;
        }
    }, 1000);

    async function button1() {
        CPXA.Light1.color = "#15FF00";
        CPXbtn.Button1.color = "#383838";
        await pause(1000);
        CPXA.Light1.color = "#383838";
        CPXbtn.Button1.color = "#FFFFFF";

        if (!settings) return;

        const items = buildSettingsLines();

        if (editingIndex === -1) {
            menuIndex = (menuIndex - 1 + items.length) % items.length;
            setSettingsScreen();
            return;
        }

        if (editingIndex === 0) {
            watering = (watering === 'Auto') ? 'Manual' : 'Auto';
            normalizeMenuAfterChange();
            setSettingsScreen();
        } else if (editingIndex === 1 && watering === 'Manual') {
            wateringTime = Math.max(0, wateringTime - 1);
            setSettingsScreen();
        }
    }

    async function button2() {
        CPXA.Light2.color = "#15FF00";
        CPXbtn.Button2.color = "#383838";
        await pause(1000);
        CPXA.Light2.color = "#383838";
        CPXbtn.Button2.color = "#FFFFFF";

        if (!settings) {
            openSettings();
            return;
        }

        const items = buildSettingsLines();

        if (menuIndex === items.length - 1 && editingIndex === -1) {
            closeSettings();
            return;
        }

        editingIndex = (editingIndex === menuIndex) ? -1 : menuIndex;

        const isEditable =
            (menuIndex === 0) ||
            (menuIndex === 1 && watering === 'Manual');

        if (!isEditable) editingIndex = -1;

        setSettingsScreen();
    }

    async function button3() {
        CPXA.Light3.color = "#15FF00";
        CPXbtn.Button3.color = "#383838";
        await pause(1000);
        CPXA.Light3.color = "#383838";
        CPXbtn.Button3.color = "#FFFFFF";

        if (!settings) return;

        const items = buildSettingsLines();

        if (editingIndex === -1) {
            menuIndex = (menuIndex + 1) % items.length;
            setSettingsScreen();
            return;
        }

        if (editingIndex === 0) {
            watering = (watering === 'Auto') ? 'Manual' : 'Auto';
            normalizeMenuAfterChange();
            setSettingsScreen();
        } else if (editingIndex === 1 && watering === 'Manual') {
            wateringTime = wateringTime + 1;
            setSettingsScreen();
        }
    }

    onMount(async () => {
        setStatusScreen();
    });
</script>

<main>
    <h1>SWAG SIM</h1>
    <div class="svgs">
        <svg width="50%" height="auto" viewBox="0 0 544 428" xmlns="http://www.w3.org/2000/svg">
            <!-- Button 1 -->
            <circle cx="70.7983" cy="323.213" r="10" fill="#383838"/>
            <circle cx="70.7983" cy="323.213" r="7" fill={CPXbtn.Button1.color} class="button" onclick={()=> {button1()}}/>
            <text x="40" y="350" fill="#FFFFFF" style="font-size: 18px;">&lt; Left</text>

            <!-- Button 2 -->
            <circle cx="121.798" cy="399.213" r="10" fill="#383838"/>
            <circle cx="121.798" cy="399.213" r="7" fill={CPXbtn.Button2.color} class="button" onclick={()=> {button2()}}/>
            <text x="95" y="425" fill="#FFFFFF" style="font-size: 18px;">Action</text>

            <!-- Button 3 -->
            <circle cx="173.798" cy="323.213" r="10" fill="#383838"/>
            <circle cx="173.798" cy="323.213" r="7" fill={CPXbtn.Button3.color} class="button" onclick={()=> {button3()}}/>
            <text x="160" y="350" fill="#FFFFFF" style="font-size: 18px;">Right &gt;</text>

            <!-- CPX A -->
            <!-- CPX --> <circle cx="120.798" cy="217.213" r="50" fill="#383838"/>
            <!-- Light 0 --> <circle cx="5" cy="5" r="4.5" transform="matrix(-1 0 0 1 110.798 177.213)" fill={CPXA.Light0.color} stroke="white"/>
            <!-- Light 1 --> <circle cx="5" cy="5" r="4.5" transform="matrix(6.55671e-08 1 1 -6.55671e-08 86.7983 192.213)" fill={CPXA.Light1.color} stroke="white"/>
            <!-- Light 2 --> <circle cx="5" cy="5" r="4.5" transform="matrix(0 1 1 0 80.7983 212.213)" fill={CPXA.Light2.color} stroke="white"/>
            <!-- Light 3 --> <circle cx="5" cy="5" r="4.5" transform="matrix(-1 2.18557e-08 2.18557e-08 1 96.7983 232.213)" fill={CPXA.Light3.color} stroke="white"/>
            <!-- Light 4 --> <circle cx="5" cy="5" r="4.5" transform="matrix(-1 0 0 1 110.798 247.213)" fill={CPXA.Light4.color} stroke="white"/>
            <!-- Light 5 --> <circle cx="135.798" cy="252.213" r="4.5" fill={CPXA.Light5.color} stroke="white"/>
            <!-- Light 6 --> <circle cx="149.798" cy="237.213" r="4.5" fill={CPXA.Light6.color} stroke="white"/>
            <!-- Light 7 -->  <circle cx="155.798" cy="217.213" r="4.5" transform="rotate(90 155.798 217.213)" fill={CPXA.Light7.color} stroke="white"/> 
            <!-- Light 8 --> <circle cx="149.798" cy="197.213" r="4.5" transform="rotate(90 149.798 197.213)" fill={CPXA.Light8.color} stroke="white"/> 
            <!-- Light 9 --> <circle cx="135.798" cy="182.213" r="4.5" fill={CPXA.Light9.color} stroke="white"/>
            <!-- Button A --> <rect x="105.798" y="212.213" width="10" height="10" fill="#7B7B7B"/>
            <!-- Button B --> <rect x="125.798" y="212.213" width="10" height="10" fill="#7B7B7B"/>

            <!-- CPX B -->
            <!-- Cricket--> <circle cx="339.798" cy="217.213" r="75" fill="#4A613F"/>
            <!-- CPX --> <circle cx="339.798" cy="217.213" r="50" fill="#383838"/>
            <!-- Light 0 --> <circle cx="5" cy="5" r="4.5" transform="matrix(-1 0 0 1 329.798 177.213)" fill="#383838" stroke="white"/>
            <!-- Light 1 --> <circle cx="5" cy="5" r="4.5" transform="matrix(6.55671e-08 1 1 -6.55671e-08 305.798 192.213)" fill="#383838" stroke="white"/>
            <!-- Light 2 --> <circle cx="5" cy="5" r="4.5" transform="matrix(0 1 1 0 299.798 212.213)" fill="#383838" stroke="white"/>
            <!-- Light 3 --> <circle cx="5" cy="5" r="4.5" transform="matrix(-1 2.18557e-08 2.18557e-08 1 315.798 232.213)" fill="#383838" stroke="white"/>
            <!-- Light 4 --> <circle cx="5" cy="5" r="4.5" transform="matrix(-1 0 0 1 329.798 247.213)" fill="#383838" stroke="white"/>
            <!-- Light 5 --> <circle cx="354.798" cy="252.213" r="4.5" fill="#383838" stroke="white"/>
            <!-- Light 6 --> <circle cx="368.798" cy="237.213" r="4.5" fill="#383838" stroke="white"/>
            <!-- Light 7 --> <circle cx="374.798" cy="217.213" r="4.5" transform="rotate(90 374.798 217.213)" fill="#383838" stroke="white"/>
            <!-- Light 8 --> <circle cx="368.798" cy="197.213" r="4.5" transform="rotate(90 368.798 197.213)" fill="#383838" stroke="white"/>
            <!-- Light 9 --> <circle cx="354.798" cy="182.213" r="4.5" fill="#383838" stroke="white"/> 
            <!-- Button A --> <rect x="324.798" y="212.213" width="10" height="10" fill="#7B7B7B"/>
            <!-- Button B --> <rect x="344.798" y="212.213" width="10" height="10" fill="#7B7B7B"/>

            <!-- Hum Sensor -->
            <path d="M49.7983 154.213H39.7983V54.2129H44.7983C47.5598 54.2129 49.7983 56.4515 49.7983 59.2129V154.213Z" fill="#685344"/>
            <path d="M29.7983 154.213H19.7983V59.2129C19.7983 56.4515 22.0369 54.2129 24.7983 54.2129H29.7983V154.213Z" fill="#685344"/>
            <path d="M19.7983 59.2129C19.7983 56.4515 22.0369 54.2129 24.7983 54.2129H44.7983C47.5598 54.2129 49.7983 56.4515 49.7983 59.2129V84.2129H39.7983C39.7983 81.4515 37.5598 79.2129 34.7983 79.2129C32.0369 79.2129 29.7983 81.4515 29.7983 84.2129H19.7983V59.2129Z" fill="#505050"/>
            <path d="M24.7983 164.213L19.7983 154.213H29.7983L24.7983 164.213Z" fill="#685344"/>
            <path d="M44.7983 164.213L39.7983 154.213H49.7983L44.7983 164.213Z" fill="#685344"/>

            <!-- Motor -->
            <rect x="415.798" y="282.213" width="18" height="60" fill="#766325"/>
            <rect x="433.798" y="292.213" width="10" height="5" fill="#D9D9D9"/>
            <rect x="405.798" y="292.213" width="10" height="5" fill="#D9D9D9"/>
            <rect x="423.798" y="342.213" width="2" height="8" fill="#747474"/>

            <!-- Display -->
            <rect x="415.298" y="102.713" width="74" height="39" fill="black" stroke="white"/>
            <text x="420" y="112" fill="#FFFFFF" style={`font-size: 8px; text-decoration: ${editingIndex===0 ? 'underline' : 'none'};`}>{displayText.Line1.text}</text>
            <text x="420" y="120" fill="#FFFFFF" style={`font-size: 8px; text-decoration: ${editingIndex===1 ? 'underline' : 'none'};`}>{displayText.Line2.text}</text>
            <text x="420" y="128" fill="#FFFFFF" style={`font-size: 8px; text-decoration: ${editingIndex===2 ? 'underline' : 'none'};`}>{displayText.Line3.text}</text>
            <text x="420" y="136" fill="#FFFFFF" style={`font-size: 8px; text-decoration: ${editingIndex===3 ? 'underline' : 'none'};`}>{displayText.Line4.text}</text>


            <!-- Lights -->
            <!-- Light 1 --> <circle cx="176.798" cy="51.2129" r="13.5" fill="#1E1E1E" stroke="white" stroke-width="3"/>
            <!-- Light 2 --> <circle cx="216.798" cy="51.2129" r="13.5" fill="#1E1E1E" stroke="white" stroke-width="3"/>
            <!-- Light 3 --> <circle cx="256.798" cy="51.2129" r="13.5" fill="#1E1E1E" stroke="white" stroke-width="3"/>

            <!-- Arrows -->
            <path d="M34.7977 59.9864L40.5712 54.2129L34.7976 48.4394L29.0241 54.213L34.7977 59.9864ZM120.798 37.2129L121.798 37.2129L121.798 36.2129L120.798 36.2129L120.798 37.2129ZM34.7976 37.2129L34.7976 36.2129L33.7976 36.2129L33.7976 37.2129L34.7976 37.2129ZM120.798 37.2129L119.798 37.2129L119.797 167.213L120.797 167.213L121.797 167.213L121.798 37.2129L120.798 37.2129ZM34.7976 54.2129L35.7976 54.2129L35.7976 37.2129L34.7976 37.2129L33.7976 37.2129L33.7976 54.213L34.7976 54.2129ZM34.7976 37.2129L34.7976 38.2129L120.798 38.2129L120.798 37.2129L120.798 36.2129L34.7976 36.2129L34.7976 37.2129Z" fill="#FF0000"/>
            <path d="M434.798 205.213L424.798 199.439L424.798 210.986L434.798 205.213ZM425.798 205.213L425.798 204.213L387.798 204.213L387.798 205.213L387.798 206.213L425.798 206.213L425.798 205.213Z" fill="#FF0000"/>
            <path d="M434.798 230.213L424.798 224.439V235.986L434.798 230.213ZM425.798 230.213V229.213H387.798V230.213V231.213H425.798V230.213Z" fill="#FF0000"/>
            <path d="M163.025 206.213L168.798 211.986L174.572 206.213L168.798 200.439L163.025 206.213ZM296.572 206.213L290.798 200.439L285.025 206.213L290.798 211.986L296.572 206.213ZM168.798 206.213V207.213H290.798V206.213V205.213H168.798V206.213Z" fill="#FF0000"/>
            <path d="M164.025 227.213L169.798 232.986L175.572 227.213L169.799 221.439L164.025 227.213ZM296.572 227.217L290.799 221.444L285.025 227.217L290.798 232.991L296.572 227.217ZM169.798 227.213L169.798 228.213L290.798 228.217L290.798 227.217L290.798 226.217L169.798 226.213L169.798 227.213Z" fill="#FF0000"/>
            <path d="M142.802 256.439L137.029 262.213L142.802 267.986L148.576 262.213L142.802 256.439ZM169.572 323.213L163.798 317.439L158.025 323.213L163.798 328.986L169.572 323.213ZM142.802 323.213H141.802V324.213H142.802V323.213ZM142.802 262.213H141.802V323.213H142.802H143.802V262.213H142.802ZM142.802 323.213V324.213H163.798V323.213V322.213H142.802V323.213Z" fill="#FF0000"/>
            <path d="M121.803 262.439L116.029 268.213L121.802 273.986L127.576 268.213L121.803 262.439ZM121.798 394.986L127.572 389.213L121.798 383.439L116.025 389.213L121.798 394.986ZM121.802 268.213L120.802 268.213L120.798 389.213L121.798 389.213L122.798 389.213L122.802 268.213L121.802 268.213Z" fill="#FF0000"/>
            <path d="M101.803 257.439L96.0296 263.213L101.803 268.986L107.577 263.213L101.803 257.439ZM75.0255 323.213L80.799 328.986L86.5725 323.213L80.799 317.439L75.0255 323.213ZM101.802 323.213L101.802 324.213L102.802 324.213L102.802 323.213L101.802 323.213ZM101.803 263.213L100.803 263.213L100.802 323.213L101.802 323.213L102.802 323.213L102.803 263.213L101.803 263.213ZM101.802 323.213L101.802 322.213L80.799 322.213L80.799 323.213L80.799 324.213L101.802 324.213L101.802 323.213Z" fill="#FF0000"/>
            <path d="M340.313 173.844L346.086 168.07L340.313 162.297L334.539 168.07L340.313 173.844ZM340.313 123.07L340.313 122.07L339.313 122.07L339.313 123.07L340.313 123.07ZM415.313 123.07L415.313 122.07L340.313 122.07L340.313 123.07L340.313 124.07L415.313 124.07L415.313 123.07ZM340.313 123.07L339.313 123.07L339.313 168.07L340.313 168.07L341.313 168.07L341.313 123.07L340.313 123.07Z" fill="#FF0000"/>
            <path d="M340.313 261.209L346.086 266.982L340.313 272.756L334.539 266.982L340.313 261.209ZM340.313 312.213L340.313 313.213L339.313 313.213L339.313 312.213L340.313 312.213ZM415.798 312.213L415.798 313.213L340.313 313.213L340.313 312.213L340.313 311.213L415.798 311.213L415.798 312.213ZM340.313 312.213L339.313 312.213L339.313 266.982L340.313 266.982L341.313 266.982L341.313 312.213L340.313 312.213Z" fill="#FF0000"/>
            <path d="M256.798 60.4394L251.025 66.2129L256.798 71.9864L262.572 66.2129L256.798 60.4394ZM256.798 190.213L256.788 191.213L257.798 191.224L257.798 190.213L256.798 190.213ZM161.798 189.213L161.788 190.213L256.788 191.213L256.798 190.213L256.809 189.213L161.809 188.213L161.798 189.213ZM256.798 190.213L257.798 190.213L257.798 66.2129L256.798 66.2129L255.798 66.2129L255.798 190.213L256.798 190.213Z" fill="#FF0000"/>
            <path d="M216.798 60.4394L211.025 66.2129L216.798 71.9864L222.572 66.2129L216.798 60.4394ZM216.798 175.213L216.798 176.213L217.798 176.213L217.798 175.213L216.798 175.213ZM147.798 175.213L147.798 176.213L216.798 176.213L216.798 175.213L216.798 174.213L147.798 174.213L147.798 175.213ZM216.798 175.213L217.798 175.213L217.798 66.2129L216.798 66.2129L215.798 66.2129L215.798 175.213L216.798 175.213Z" fill="#FF0000"/>
            <path d="M176.798 60.4394L171.025 66.2129L176.798 71.9864L182.572 66.2129L176.798 60.4394ZM176.798 168.213L176.798 169.213L177.798 169.213L177.798 168.213L176.798 168.213ZM129.798 168.213L129.798 169.213L176.798 169.213L176.798 168.213L176.798 167.213L129.798 167.213L129.798 168.213ZM176.798 168.213L177.798 168.213L177.798 66.2129L176.798 66.2129L175.798 66.2129L175.798 168.213L176.798 168.213Z" fill="#FF0000"/>
        </svg>
        <svg width="50%" height="auto" viewBox="0 0 506 502" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Motor 1 -->
            <rect width="18" height="60" transform="matrix(0 -1 -1 0 384.506 107)" fill="#766325"/>
            <rect width="10" height="5" transform="matrix(0 -1 -1 0 374.506 89)" fill="#D9D9D9"/>
            <rect width="10" height="5" transform="matrix(0 -1 -1 0 374.506 117)" fill="#D9D9D9"/>
            <rect width="2" height="8" transform="matrix(0 -1 -1 0 324.506 99)" fill="#747474"/>
            <!-- Hum Sensor -->
            <path d="M164.506 192H154.506V92H159.506C162.268 92 164.506 94.2386 164.506 97V192Z" fill="#685344"/>
            <path d="M144.506 192H134.506V97C134.506 94.2386 136.745 92 139.506 92H144.506V192Z" fill="#685344"/>
            <path d="M134.506 97C134.506 94.2386 136.745 92 139.506 92H159.506C162.268 92 164.506 94.2386 164.506 97V122H154.506C154.506 119.239 152.268 117 149.506 117C146.745 117 144.506 119.239 144.506 122H134.506V97Z" fill="#505050"/>

            <!-- Plant -->
            <path d="M73.5061 152H373.506V482C373.506 493.046 364.552 502 353.506 502H93.5061C82.4604 502 73.5061 493.046 73.5061 482V152Z" fill="#48352A"/>

            <!-- Lights -->
            <!-- Light 1 --> <circle cx="183.506" cy="199" r="13.5" fill="#1E1E1E" stroke="white" stroke-width="3"/>
            <!-- Light 2 --> <circle cx="223.506" cy="199" r="13.5" fill="#1E1E1E" stroke="white" stroke-width="3"/>
            <!-- Light 3 --> <circle cx="263.506" cy="199" r="13.5" fill="#1E1E1E" stroke="white" stroke-width="3"/>

            <!-- Button 1 -->
            <circle cx="181.506" cy="406" r="10" fill="#383838"/>
            <circle cx="181.506" cy="406" r="7" fill={CPXbtn.Button1.color} class="button" onclick={()=> {button1()}}/>
            <path d="M163.515 422.761V422.193L168.088 419.864V420.773L164.58 422.463L164.608 422.406V422.548L164.58 422.491L168.088 424.182V425.091L163.515 422.761ZM172.791 426V418.727H173.672V425.219H177.052V426H172.791ZM180.589 426.114C180.064 426.114 179.61 425.998 179.229 425.766C178.851 425.531 178.558 425.205 178.352 424.786C178.149 424.364 178.047 423.874 178.047 423.315C178.047 422.757 178.149 422.264 178.352 421.838C178.558 421.41 178.845 421.076 179.212 420.837C179.581 420.595 180.012 420.474 180.504 420.474C180.788 420.474 181.069 420.522 181.346 420.616C181.623 420.711 181.875 420.865 182.102 421.078C182.329 421.289 182.511 421.568 182.645 421.916C182.78 422.264 182.848 422.693 182.848 423.202V423.557H178.643V422.832H181.996C181.996 422.525 181.934 422.25 181.811 422.009C181.69 421.767 181.517 421.576 181.293 421.437C181.07 421.297 180.807 421.227 180.504 421.227C180.17 421.227 179.882 421.31 179.638 421.476C179.396 421.639 179.21 421.852 179.08 422.115C178.95 422.378 178.885 422.66 178.885 422.96V423.443C178.885 423.855 178.956 424.204 179.098 424.491C179.242 424.775 179.442 424.991 179.698 425.141C179.954 425.287 180.251 425.361 180.589 425.361C180.81 425.361 181.008 425.33 181.186 425.268C181.366 425.205 181.521 425.11 181.651 424.984C181.781 424.857 181.882 424.698 181.953 424.509L182.763 424.736C182.677 425.01 182.534 425.252 182.333 425.46C182.132 425.666 181.883 425.827 181.587 425.943C181.291 426.057 180.959 426.114 180.589 426.114ZM186.552 420.545V421.256H183.611V420.545H186.552ZM184.492 426V419.793C184.492 419.48 184.565 419.22 184.712 419.011C184.859 418.803 185.05 418.647 185.284 418.543C185.518 418.438 185.766 418.386 186.026 418.386C186.232 418.386 186.4 418.403 186.53 418.436C186.661 418.469 186.758 418.5 186.822 418.528L186.58 419.253C186.538 419.239 186.478 419.221 186.403 419.2C186.329 419.178 186.232 419.168 186.111 419.168C185.834 419.168 185.634 419.237 185.511 419.377C185.391 419.517 185.33 419.722 185.33 419.991V426H184.492ZM190.098 420.545V421.256H187.272V420.545H190.098ZM188.096 419.239H188.934V424.438C188.934 424.674 188.968 424.852 189.037 424.97C189.108 425.086 189.198 425.164 189.307 425.205C189.418 425.242 189.535 425.261 189.658 425.261C189.75 425.261 189.826 425.257 189.885 425.247C189.945 425.235 189.992 425.226 190.027 425.219L190.198 425.972C190.141 425.993 190.062 426.014 189.96 426.036C189.858 426.059 189.729 426.071 189.573 426.071C189.336 426.071 189.104 426.02 188.877 425.918C188.652 425.817 188.465 425.661 188.316 425.453C188.169 425.245 188.096 424.982 188.096 424.665V419.239Z" fill="white"/>

            <!-- Button 2 -->
            <circle cx="221.506" cy="406" r="10" fill="#383838"/>
            <circle cx="221.506" cy="406" r="7" fill={CPXbtn.Button2.color} class="button" onclick={()=> {button2()}}/>
            <text x="205" y="426" fill="#FFFFFF" style="font-size: 12px;">Action</text>

            <!-- Button 3 -->
            <circle cx="261.506" cy="406" r="10" fill="#383838"/>
            <circle cx="261.506" cy="406" r="7" fill={CPXbtn.Button3.color} class="button" onclick={()=> {button3()}}/>
            <path d="M252.387 426V418.727H254.844C255.412 418.727 255.879 418.824 256.243 419.018C256.608 419.21 256.878 419.474 257.053 419.81C257.228 420.147 257.316 420.529 257.316 420.957C257.316 421.386 257.228 421.766 257.053 422.097C256.878 422.429 256.609 422.689 256.247 422.879C255.885 423.066 255.422 423.159 254.858 423.159H252.87V422.364H254.83C255.218 422.364 255.531 422.307 255.767 422.193C256.007 422.08 256.179 421.919 256.286 421.71C256.395 421.5 256.449 421.249 256.449 420.957C256.449 420.666 256.395 420.412 256.286 420.194C256.177 419.976 256.003 419.808 255.764 419.69C255.525 419.569 255.209 419.509 254.816 419.509H253.267V426H252.387ZM255.81 422.733L257.6 426H256.577L254.816 422.733H255.81ZM258.67 426V420.545H259.508V426H258.67ZM259.096 419.636C258.932 419.636 258.792 419.581 258.673 419.469C258.557 419.358 258.499 419.224 258.499 419.068C258.499 418.912 258.557 418.778 258.673 418.667C258.792 418.556 258.932 418.5 259.096 418.5C259.259 418.5 259.399 418.556 259.515 418.667C259.633 418.778 259.692 418.912 259.692 419.068C259.692 419.224 259.633 419.358 259.515 419.469C259.399 419.581 259.259 419.636 259.096 419.636ZM263.244 428.159C262.84 428.159 262.492 428.107 262.2 428.003C261.909 427.901 261.666 427.766 261.472 427.598C261.281 427.432 261.128 427.255 261.014 427.065L261.682 426.597C261.758 426.696 261.854 426.81 261.97 426.938C262.086 427.068 262.244 427.18 262.445 427.275C262.649 427.372 262.915 427.42 263.244 427.42C263.685 427.42 264.048 427.314 264.335 427.101C264.621 426.888 264.764 426.554 264.764 426.099V424.991H264.693C264.632 425.091 264.544 425.214 264.43 425.361C264.319 425.505 264.158 425.634 263.948 425.748C263.739 425.859 263.457 425.915 263.102 425.915C262.662 425.915 262.267 425.811 261.916 425.602C261.568 425.394 261.292 425.091 261.089 424.693C260.888 424.295 260.787 423.812 260.787 423.244C260.787 422.686 260.885 422.199 261.082 421.785C261.278 421.368 261.552 421.046 261.902 420.819C262.252 420.589 262.657 420.474 263.117 420.474C263.472 420.474 263.753 420.534 263.962 420.652C264.172 420.768 264.333 420.901 264.445 421.05C264.558 421.196 264.646 421.317 264.707 421.412H264.793V420.545H265.602V426.156C265.602 426.625 265.496 427.006 265.283 427.3C265.072 427.596 264.788 427.812 264.43 427.95C264.075 428.089 263.68 428.159 263.244 428.159ZM263.216 425.162C263.552 425.162 263.836 425.085 264.068 424.931C264.3 424.777 264.477 424.556 264.597 424.267C264.718 423.978 264.778 423.633 264.778 423.23C264.778 422.837 264.719 422.49 264.601 422.19C264.483 421.889 264.307 421.653 264.075 421.483C263.843 421.312 263.557 421.227 263.216 421.227C262.861 421.227 262.565 421.317 262.328 421.497C262.094 421.677 261.917 421.919 261.799 422.222C261.683 422.525 261.625 422.861 261.625 423.23C261.625 423.609 261.684 423.944 261.803 424.235C261.923 424.524 262.101 424.751 262.335 424.917C262.572 425.08 262.866 425.162 263.216 425.162ZM267.974 422.719V426H267.136V418.727H267.974V421.398H268.046C268.173 421.116 268.365 420.892 268.621 420.727C268.879 420.558 269.222 420.474 269.651 420.474C270.022 420.474 270.348 420.549 270.627 420.698C270.907 420.845 271.123 421.071 271.277 421.376C271.433 421.679 271.511 422.065 271.511 422.534V426H270.673V422.591C270.673 422.158 270.561 421.823 270.336 421.586C270.113 421.347 269.805 421.227 269.409 421.227C269.135 421.227 268.888 421.285 268.671 421.401C268.455 421.517 268.285 421.687 268.159 421.909C268.036 422.132 267.974 422.402 267.974 422.719ZM275.417 420.545V421.256H272.59V420.545H275.417ZM273.414 419.239H274.252V424.438C274.252 424.674 274.286 424.852 274.355 424.97C274.426 425.086 274.516 425.164 274.625 425.205C274.736 425.242 274.853 425.261 274.976 425.261C275.069 425.261 275.145 425.257 275.204 425.247C275.263 425.235 275.31 425.226 275.346 425.219L275.516 425.972C275.459 425.993 275.38 426.014 275.278 426.036C275.176 426.059 275.047 426.071 274.891 426.071C274.654 426.071 274.422 426.02 274.195 425.918C273.97 425.817 273.783 425.661 273.634 425.453C273.487 425.245 273.414 424.982 273.414 424.665V419.239ZM284.305 423.443L279.731 425.773V424.864L283.24 423.173L283.212 423.23V423.088L283.24 423.145L279.731 421.455V420.545L284.305 422.875V423.443Z" fill="white"/>

            <!-- Cable -->
            <path d="M384.999 98.0798L418.006 98.0798L418.006 167L373.999 166.08" stroke="white" stroke-width="2"/>
            <path d="M150.263 92.6536L150.263 73.5L53.0061 73.5L53.0061 180.654L74.263 180.654" stroke="white" stroke-width="2"/>

            <!-- Water system -->
            <!-- Water -->
            <path d="M373.506 122H503.506C503.506 133.046 494.552 142 483.506 142H373.506V122Z" fill="#0052BD"/>
            <path d="M429.506 39C429.506 18.5655 446.072 2 466.506 2C486.941 2 503.506 18.5655 503.506 39V122H429.506V39Z" fill="#0052BD"/>
            <!-- Closing Lid -->
            <rect x="370.506" y="116" width="3" height="26" fill="#D9D9D9"/>
            <!-- Glass -->
            <path d="M348.506 122H505.506V124C505.506 135.046 496.552 144 485.506 144H348.506V122Z" fill="#D9D9D9" fill-opacity="0.2"/>
            <path d="M426.506 39.5C426.506 17.6847 444.191 0 466.006 0C487.821 0 505.506 17.6848 505.506 39.5V122H426.506V39.5Z" fill="#D9D9D9" fill-opacity="0.2"/>
            <rect x="348.506" y="120" width="78" height="2" fill="#D9D9D9" fill-opacity="0.2"/>


            <!-- Display -->
            <rect x="109.006" y="252.5" width="228" height="121" fill="black" stroke="white"/>
            <text x="115" y="275" fill="#FFFFFF" style={`font-size: 20px; text-decoration: ${editingIndex===0 ? 'underline' : 'none'};`}>{displayText.Line1.text}</text>
            <text x="115" y="300" fill="#FFFFFF" style={`font-size: 20px; text-decoration: ${editingIndex===1 ? 'underline' : 'none'};`}>{displayText.Line2.text}</text>
            <text x="115" y="325" fill="#FFFFFF" style={`font-size: 20px; text-decoration: ${editingIndex===2 ? 'underline' : 'none'};`}>{displayText.Line3.text}</text>
            <text x="115" y="350" fill="#FFFFFF" style={`font-size: 20px; text-decoration: ${editingIndex===3 ? 'underline' : 'none'};`}>{displayText.Line4.text}</text>
        </svg>
    </div>
</main>